[ Chapter 2. 네트워크 ]
# 2.1 네트워크의 기초
- 네트워크란? 
  - 컴퓨터 등의 장치들이 통신 기술을 이용하여 구축하는 연결망
  - 노드와 링크가 서로 연결되어 있거나 연결되어 있지 않은 집합체
  - 노드: 서버, 스위치 등 네트워크 장치
  - 링크: 유선 or 무선

# 📌 2.1.1 처리량과 지연시간
- 좋은 네트워크란?
  - 많은 처리량을 처리할 수 있음
  - 지연 시간이 짧음
  - 장애 빈도 적음
  - 좋은 보안

## ✔️ 처리량
- 처리량(throughput)이란 링크를 통해 전달되는 **단위 시간당 데이터양**
- 단위: bps(bits per second) = 초당 전송 또는 수신되는 비트 수
- <img width="352" alt="image" src="https://user-images.githubusercontent.com/108309396/234613285-2eaa6353-ea35-4e2e-8802-ebe075ed8e8f.png">
- 처리량에 영향을 끼치는 요소
  - 트래픽
  - 네트워크 장치 간의 대역폭
  - 네트워크 중간에 발생하는 에러
  - 장치의 하드웨어 스펙에 영향을 받음

> [참고] 대역폭이란? 주어진 시간동안 네트워크 연결을 통해 흐를 수 있는 최대 비트 수

## ✔️ 지연 시간
- 지연 시간(latency)이란 **요청이 처리되는 시간**, 어떤 메시지가 두 장치 사이를 왕복하는 데 걸린 시간
- <img width="315" alt="image" src="https://user-images.githubusercontent.com/108309396/234613972-a767db24-3714-4cdc-8ca1-b2de36212900.png">
- 지연시간은 매체 타입(무선 or 유선), 패킷 크기, 라우터의 패킷 처리 시간에 영향을 받음


# 📌 2.1.2 네트워크 토폴로지와 병목 현상
## ✔️ 네트워크 토폴로지
- 네트워크 토폴로지란? **노드와 링크가 어떻게 배치되어 있는지에 대한 방식이자 연결 형태**

## ✔️ 네트워크 토폴로지의 종류
1. 트리 토폴로지
   - <img width="335" alt="image" src="https://user-images.githubusercontent.com/108309396/234614898-8f751b9e-d80e-452e-b843-c495181c6638.png">
   - 계층형 토폴로지, 트리 형태로 구성
   - 노드의 추가, 삭제가 쉬움
   - but 특정 노드에 트래픽이 집중될 때 하위 노드에 영향을 끼칠 수 있음

2. 버스 토폴로지
   - <img width="353" alt="image" src="https://user-images.githubusercontent.com/108309396/234615655-7295ed87-619e-464f-b85b-e29b5326c4b7.png">
   - **중앙 통신 회선 하나에 여러 개의 노드가 연결**되어 공유하는 네트워크 구성
   - 근거리 통신망(LAN)에서 사용
   - 설치비용&darr;
   - 신뢰성 우수
   - 중앙 통신 회선에 노드를 추가하거나 삭제하기 쉬움
   - but 스푸핑이 가능

> ### [참고] 스푸핑이란?
> - LAN상에서 송신부의 패킷을 송신과 관련 없는 악의적인 노드에 오도록 처리하는 것
> - 스위칭 기능: 송신부의 패킷이 관련 없는 다른 호스트에게 가지 않도록 막아줌
> - 스위칭 기능을 마비시키거나 속이면 &rarr; 스푸핑  
> <img width="410" alt="image" src="https://user-images.githubusercontent.com/108309396/234616862-79c506f4-e7bc-4a8a-afe1-a8b002fa96a4.png"> 

3. 스타 토폴로지
   - <img width="333" alt="image" src="https://user-images.githubusercontent.com/108309396/234617247-7d1e4fb5-1c94-4e85-a8cc-c621aaba1486.png">
   - **중앙에 있는 노드에 모두 연결**된 네트워크 구성
   - 노드를 추가하거나 에러를 탐지하기 쉬움
   - 패킷의 충돌 발생 가능성&darr;
   - 장애 노드가 중앙 노드가 아닐 경우 다른 노드에 영향 끼치는 경우 적음
   - but 중앙 노드에 장애 발생 시 전체 네트워크 사용 불가
   - but 설치 비용&uarr;

4. 링형 토폴로지
   - <img width="322" alt="image" src="https://user-images.githubusercontent.com/108309396/234617778-bc6dd13f-8733-4c76-9402-fc35b5e1e5f9.png">
   - **각각의 노드가 양 옆의 두 노드와 연결**되어 하나의 연속된 길을 통해 통신
   - 데이터는 노드에서 노드로 이동
   - 각각의 노드는 고리 모양의 길을 통해 패킷을 처리
   - 노드 수가 증가해도 네트워크 상 손실 거의 X
   - 충돌 발생 가능성&darr;
   - 노드의 고장 발견 쉬움
   - but 네트워크 구성 변경 어려움
   - but 회선에 장애 발생 시 전체 네트워크에 영향을 크게 끼침

5. 메시(망형) 토폴로지
   - <img width="322" alt="image" src="https://user-images.githubusercontent.com/108309396/234618535-6064ac94-11b1-4001-9fe5-12725e3bc0b0.png">
   - **그물망처럼 연결**되어 있는 구조
   - 한 단말 장치에 장애가 발생해도 네트워크 계속 사용 가능
   - 트래픽 분산 처리 가능
   - but 노드 추가 어려움
   - 구축 비용과 운용 비용&uarr;

## ✔️ 병목 현상
- 토폴로지가 중요한 이유 &rarr; 병목 현상을 찾을 때 중요한 기준이 됨
- 병목현상이란? **전체 시스템의 성능이나 용량이 하나의 구성 요소로 인해 제한을 받는 현상**
- 병목 현상의 주된 원인
  - 네트워크 대역폭
  - 네트워크 토폴로지
  - 서버 CPU, 메모리 사용량
  - 비효율적인 네트워크 구성


# 📌 2.1.3 네트워크 분류
- LAN(Local Area Network): 근거리 통신망, 같은 건물이나 캠퍼스, 전송 속도 빠름, 혼잡하지 않음
- MAN(Metropolitan Area Network): 대도시 지역 네트워크, 도시 같은 넓은 지역, 전송 속도 평균, LAN보다 혼잡
- WAN(Wide Area Network): 광역 네트워크, 국가 또는 대륙 같은 더 넓은 지역, 전송 속도 낮음, MAN보다 혼잡


# 📌 2.1.4 네트워크 성능 분석 명령어
1. `ping [IP주소 또는 도메인 주소]`(Packet INternet Groper)
   - 네트워크 상태를 확인하려는 대상 노드를 향해 일정 크기의 패킷을 전송
   - 해당 노드의 패킷 수신 상태 및 도달하기까지 걸린 시간 등을 알 수 있음
   - 즉, **해당 노드까지 네트워크가 잘 연결되어 있는지** 확인 가능
   - *ICMP 프로토콜*을 통해 동작
2. `netstat`
   - 접속되어 있는 서비스들의 네트워크 상태를 표시
   - 네트워크 접속, 라우팅 테이블, 네트워크 프로토콜 등 리스트를 보여줌
   - 주로 **서비스의 포트가 열려 있는지 확인**할 때 사용
3. `nslookup`
   - DNS에 관련된 내용을 확인
   - 특정 도메인에 매핑된 IP를 확인
4. `tracert`(Windows) / `traceroute`(Linux)
   - 목적지 노드까지 네트워크 경로 확인
   - 목적지 노드까지의 구간들 중 어느 구간에서 응답 시간이 느려지는 지 확인 가능
5. 기타
   - `ftp`: 대형 파일을 전송해 테스팅
   - `tcpdump`: 노드로 오고 가는 패킷 캡처
   - 네트워크 분석 프로그램: wireshark, netmon


# 📌 2.1.5 네트워크 프로토콜 표준화
- 네트워크 프로토콜이란? 다른 장치들끼리 데이터를 주고받기 위해 설정된 공통된 인터페이스
- ex) IEEE802.3: 유선 LAN 프로토콜 &rarr; 유선으로 LAN을 구축할 때 쓰이는 프로토콜
- 프로토콜 표준화 &rarr; 장치를 만든 기업이 달라도 서로 데이터 수신 가능



# 2.2 TCP / IP 4계층 모델
- 인터넷 프로토콜 스위트(Internet protocol suit): 인터넷에서 컴퓨터들이 서로 정보를 주고받는 데 쓰이는 프로토콜의 집합
- TCP/IP(Transmission Control Protocol/Internet Protocol) 4계층 모델
  - 네트워크에서 사용되는 프로토콜의 집합으로 계층들은 프로토콜의 네트워킹 범위에 따라 네 개의 추상화 계층으로 구성

## 📌 2.2.1 계층 구조
### ✔️ TCP/IP 4계층과 OSI 7계층 비교
![image](https://user-images.githubusercontent.com/108309396/234729399-c8339927-f9a5-466e-a9be-673a12c763b6.png)  
- 각 계층들은 **특정 계층이 변경되었을 때 다른 계층이 영향을 받지 않도록** 설계
- 각 계층을 대표하는 스택  
![image](https://user-images.githubusercontent.com/108309396/234729522-63b8c8b9-89d0-4968-a311-71daa88aa06f.png)

### ✔️ 1. 애플리케이션 계층
- FTP, HTTP, SSH, SMTP, DNS 등 응용프로그램이 사용되는 프로토콜 계층
- 서비스를 실질적으로 사람들에게 제공하는 층(ex. 웹 서비스, 이메일 등)

> ### [참고] 용어
> - FTP: 장치와 장치 간의 파일을 전송하는 데 사용되는 표준 통신 프로토콜
> - SSH: 보안되지 않은 네트워크에서 네트워크 서비스를 안전하게 운영하기 위한 암호화 네트워크 프로토콜
> - HTTP: World Wide Web을 위한 데이터 통신의 기초이자 웹 사이트를 이용하는 데 쓰는 프로토콜
> - SMTP: 전자 메일 전송을 위한 인터넷 표준 통신 프로토콜
> - DNS: 도메인 이름과 IP 주소를 매핑해주는 서버
>   - www.naver.com에 DNS 쿼리가 오면
>   - [Root DNS] &rarr; [.com DNS] &rarr; [.naver DNS] &rarr; [.www DNS] 과정을 거쳐 완벽한 주소를 찾아 IP 주소를 매핑
>   - IP 주소가 변경되어도 똑같은 도메인 주소를 서비스 가능

### ✔️ 2. 전송 계층
- 전송(transport) 계층: 애플리케이션과 인터넷 계층 사이의 데이터가 전달될 때 중계 역할
- 송신자와 수신자를 연결하는 통신 서비스 제공
- 연결 지향 데이터 스트림 지원
- 신뢰성, 흐름 제어 제공
- TCP, UDP 등

### 🔅 TCP
- 패킷 사이의 순서 보장
- 연결지향 프로토콜 사용
- 신뢰성 구축
- 수신여부 확인
- **가상회선 패킷 교환 방식** 사용
  - 각 패킷에는 가상회선 식별자가 포함
  - 모든 패킷을 전송하면 가상회선이 해제되고 패킷들은 전송된 '순서대로' 도착하는 방식
  - ![image](https://user-images.githubusercontent.com/108309396/234730593-44256303-8bad-4247-92b4-9e378bf9a768.png)

### 🔅 UDP
- 패킷 사이의 순서 보장 X
- 수신 여부 확인 X
- 단순히 데이터만 주는 **데이터그램 패킷 교환 방식** 사용
  - 패킷이 독립적으로 이동
  - 최적의 경로를 선택하여 이동
  - 하나의 메시지에서 분할된 여러 패킷은 서로 다른 경로로 전송될 수 있음
  - 즉, 도착한 '순서가 다를' 수 있는 방식 
  - ![image](https://user-images.githubusercontent.com/108309396/234730753-d36e30cd-8295-418e-80d1-a1d1b0808f50.png)

### 🔅 TCP 연결 성립 과정
- 신뢰성을 확보할 때 '3-way handshake' 과정 발생
- 이후 연결 성립 및 데이터 전송  
![image](https://user-images.githubusercontent.com/108309396/234731012-771e47e0-3c70-4a8f-b510-a829bdd49886.png)
1. `SYN` 단계: 클라이언트는 클라이언트의 `ISN`을 담아 서버에 `SYN`을 보냄
   - `ISN`: 새로운 TCP 연결의 첫 번째 패킷에 할당된 임의의 시퀀스 번호
2. `SYN + ACK` 단계: 서버는 클라이언트의 `SYN`을 수신 후 서버의 `ISN`을 보내고 승인번호로 클라이언트의 `ISN + 1`을 보냄
3. `ACK` 단계: 클라이언트는 서버의 `ISN + 1` 한 값인 승인번호를 담아 `ACK`를 서버에 보냄
- 3-way handshake 과정 이후 신뢰성이 구축되고 데이터 전송을 시작
- TCP는 신뢰성이 있는 계층, UDP는 이 과정이 없어 신뢰성이 없는 계층

> [참고] 용어
> - `SYN`: SYNchronization, 연결 요청 플래그
> - `ACK`: ACKnowledgement, 응답 플래그
> - `ISN`: Initial Sequence Numbers, 초기 네트워크 연결을 할 때 할당된 32비트 고유 시퀀스 번호

### 🔅 TCP 연결 해제 과정
- 연결을 해제할 때는 '4-way handshake' 과정 발생  
![image](https://user-images.githubusercontent.com/108309396/234731857-94d9bd6e-8565-4040-bd8d-323edcda9074.png)  
1. 클라이언트가 연결을 닫으려고 할 때 `FIN`으로 설정된 세그먼트를 보냄. 클라이언트는 `FIN_WAIT_1` 상태로 들어가고 서버의 응답을 기다림
2. 서버는 클라이언트로 `ACK`라는 승인 세그먼트를 보냄. 서버는 `CLOSE_WAIT` 상태에 들어가고 클라이언트가 세그먼트를 받으면 `FIN_WAIT_2` 상태에 들어감
3. 서버는 `ACK`를 보내고 일정 시간 이후에 클라이언트에 `FIN`이라는 세그먼트를 보냄
4. 클라이언트는 `TIME_WAIT` 상태가 되고 다시 서버로 `ACK`르 보내서 서버는 `CLOSED` 상태가 됨. 이후 클라이언트는 어느 정도의 시간을 대기한 후 연결이 닫히고 모든 자원의 연결이 해제됨

### `TIME_WAIT`
- 바로 닫지 않고 일정 시간 뒤에 닫는 이유?
1. 지연 패킷이 발생할 경우를 대비 - 패킷이 뒤늦게 도착하고 이를 처리하지 못하면 데이터 무결성 문제 발생
2. 두 장치가 연결이 닫혔는지 확인하기 위함 - `LAST_ACK` 상태에서 닫히게 되면 다시 새로운 연결을 하려고 할 때 접속 오류 발생

### ✔️ 3. 인터넷 계층
- 인터넷 계층: 장치로부터 받은 네트워크 패킷을 지정된 IP 주소로 전송하기 위해 사용되는 계층
- 패킷을 수신해야 할 상대의 주소를 지정하여 데이터 전달
- 상대방이 제대로 받았는 지에 대해 보장X &rarr; 비연결형적인 특징
- IP, ARP, ICMP 등

### ✔️ 4. 링크 계층(= 네트워크 접근 계층)
- 실질적으로 데이터를 전달하며 장치 간에 신호를 주고받는 '규칙'을 정한느 계층
- 물리 계층과 데이터 링크 계층으로 나누기도 함
  - 물리 계층: 무선 LAN과 유선 LAN을 통해 0과 1로 이루어진 데이터를 보내는 계층
  - 데이터 링크 계층: 이더넷 프레임을 통해 에러 확인, 흐름 제어, 접근 제어 담당
- 전선, 광섬유, 무선 등

### 🔅 유선 LAN(IEEE802.3)
1. 전이중화 통신(full duplex): 양쪽 장치가 동시에 송수신할 수 있는 방식
   - 송신로와 수신로로 나눠서 데이터를 주고 받음  
   ![image](https://user-images.githubusercontent.com/108309396/234734761-a327c7d3-3d2c-4dac-91ef-28e81f3e0f3a.png)  
2. CSMA/CD: 반이중화 통신
   - 데이터를 '보낸 이후' 충돌 발생 시 일정 시간 이후 재전송하는 방식
   - 한 경로를 기반으로 데이터를 보내기 때문에 충돌에 대비해야 했기 때문

### 🔅 유선 LAN(IEEE802.3)을 이루는 케이블
1. TP 케이블(Twisted pair cable): 여덟 개의 구리선을 두 개씩 꼬아서 묶은 케이블
   - UTP 케이블: 구리선을 실드 처리하지 않고 덮음 &rarr; 흔히 LAN 케이블이라고 함
   - STP 케이블: 구리선을 실드 처리하고 덮음
2. 광섬유 케이블: 레이저를 이용해서 통신 &rarr; 장거리 및 고속 통신 가능
   - 100Gbps의 데이터 전송
   - 광섬유 내부와 외부를 다른 밀도를 가지는 유리나 플라스틱 섬유로 제작
   - 한 번 들어간 빛이 내부에서 계속적으로 반사하며 전진  
  ![image](https://user-images.githubusercontent.com/108309396/234735369-3c77e036-6c76-4981-a2f7-ff8a79970030.png)

### 🔅 무선 LAN(IEEE802.11)
- 수신과 송신에 같은 채널을 사용하기 때문에 반이중화 통신 사용
1. 반이중화 통신(half duplex): 서로 통신할 수 있지만, 동시에는 통신X, 한 번에 한 방향만 통신 가능  
![image](https://user-images.githubusercontent.com/108309396/234735535-d191f6de-0197-4dc2-946a-5e1838960ab4.png)
   - 충돌 발생 시 메시지가 손실되거나 왜곡될 수 있기 때문에 충돌 방지 시스템 필요
2. CSMA/CA: 반이중화 통신 중 하나로 장치에서 데이터를 보내기 전에 캐리어 감지 등으로 충돌 방지 시스템 사용
   - 데이터를 송신하기 전에 무선 매체 살핌
   - **캐리어 감지**: 회선이 비어있는 지 판단
   - IFS(Inter FrameSpace): 랜덤 값을 기반으로 정해진 시간만큼 기다리고, 무선 매체가 사용 중이면 점차 그 간격을 늘려가며 기다림
   - 이후 데이터 송신

### 🔅 무선 LAN을 이루는 주파수
- 무선 LAN(WLAN, Wireless Local Area Network): 무선 신호 전달 방식을 이용하여 2대 이상의 장치를 연결하는 기술
- 주파수 대역: 2.4GHz(장애물에 강하지만 전파 간섭 빈번), 5GHz(채널 수 많음, 동시 사용 가능)
- 와이파이(wifi): 전자기기들이 무선 LAN 신호에 연결할 수 있게 하는 기술
  - 무선 접속 장치(AP, Access Point) 필요 &rarr; 공유기
  - 유선 LAN에 흐르는 신호를 무선 LAN 신호로 바꿔주어 범위 내에서 무선 인터넷 사용 가능
- BSS(Basic Service Set): 동일 BSS 내에 있는 AP들과 장치들이 서로 통신 가능한 구조
  - 근거리 무선 통신 제공
  - 하나의 AP만을 기반으로 구축되어 있어 다른 곳으로 이동하며 접속 불가
- ESS(Extended Service Set): 하나 이상의 연결된 BSS 그룹
  - 장거리 무선 통신 제공
  - BSS보다 더 많은 가용성과 이동성 지원
  - 다른 곳으로 이동하며 중단 없이 네트워크 사용 가능

### 🔅 이더넷 프레임
- 데이터 링크 계층은 이더넷 프레임을 통해 전달받은 데이터의 에러를 검출하고 캡슐화  
![image](https://user-images.githubusercontent.com/108309396/234739994-9ddb8288-d0ff-40fe-9732-4afe1cfe288b.png)
- Preamble: 이더넷 프레임이 시작임을 알림
- SFD(Start Frame Delimiter): 다음 바이트부터 MAC 주소 필드가 시작됨을 알림
  - MAC 주소: 각 장치에는 네트워크에 연결하기 위한 장치(LAN 카드)가 있는데, 이를 구별하기 위한 식별번호로 6바이트(48비트)로 구성됨
- DMAC, SMAC: 수신, 송신 MAC 주소
- EtherType: 데이터 계층 위의 계층인 IP 프로토콜 정의 IPv4 또는 IPv6
- Payload: 전달받은 데이터
- CRC: 에러 확인 비트

### 🔅 계층 간 데이터 송수신 과정
![image](https://user-images.githubusercontent.com/108309396/234742761-71394a7d-e8b4-46b8-b775-bd0fc47d9a60.png)  
- 애플리케이션 계층에서 전송 계층으로 요청(request) 값들이 캡슐화 과정을 거쳐 전달
- 링크 계층을 통해 해당 서버와 통신
- 해당 서버의 링크 계층부터 애플리케이션까지 비캡슐화 과정을 거쳐 데이터 전송

### 🔅 캡슐화 과정 / 비캡슐화 과정
1. 캡슐화 과정
   - 상위 계층의 헤더와 데이터를 하위 계층의 데이터 부분에 포함시키고 해당 계층의 헤더를 삽입하는 과정  
  ![image](https://user-images.githubusercontent.com/108309396/234743933-6d6e217d-88c8-4a57-bbd5-8a45b9441751.png)  
   - 애플리케이션 계층의 데이터 &rarr; 전송 계층: '세그먼트' 또는 '데이터그램'화
   - 전송 계층 &rarr; 인터넷 계층: '패킷'화
   - 인터넷 계층 &rarr; 링크 계층: '프레임'화
2. 비캡슐화 과정
   - 하위 계층에서 상위 계층으로 가며 각 계층의 헤더 부분을 제거하는 과정
  ![image](https://user-images.githubusercontent.com/108309396/234743881-668177eb-1453-44b6-9464-c180e3dea888.png)
  - 비캡슐화 과정 이후 최종적으로 사용자에게 애플리케이션의 PDU인 메시지로 전달됨


## 📌 2.2.2 PDU
- PDU(Protocol Data Unit): 네트워크의 계층에서 계층으로 데이터가 전달될 때 한 덩어리의 단위
- PDU의 구성 요소
  - 헤더: 제어 관련 정보들이 포함됨
  - 페이로드: 데이터를 의미
- 애플리케이션 계층: 메시지
- 전송 계층: 세그먼트(TCP), 데이터그램(UDP)
- 인터넷 계층: 패킷
- 링크 계층: 프레임(데이터 링크 계층), 비트(물리 계층)
- PDU 중 아래 계층인 비트로 송수신하는 것이 모든 PDU 중 가장 빠르고 효율성&uarr;
- 애플리케이션 계층에서는 문자열을 기반으로 송수신
  - 헤더에 authorization 값 등 다른 값들을 넣는 확장이 쉽기 때문


# 2.3 네트워크 기기
## 📌 2.3.1 네트워크 기기의 처리 범위
- 상위 계층을 처리하는 기기는 하위 계층을 처리할 수 있지만 반대는 불가
- 애플리케이션 계층: L7 스위치
- 인터넷 계층: 라우터, L3 스위치
- 데이터 링크 계층: L2 스위치, 브리지
- 물리 계층: NIC, 리피터, AP

## 📌 2.3.2 애플리케이션 계층을 처리하는 기기
### 🔅 L7 스위치
- 스위치: 여러 장비 연결, 데이터 통신 중재, 목적지가 연결된 포트로만 전기 신호를 보내 데이터를 전송하는 통신 네트워크 장비
- L7 스위치 == 로드밸런서
  - **로드밸런서**란? 서버의 부하를 분산하는 기기
  - 클라이언트로부터 오는 요청들을 여러 서버로 나눔 &rarr; 시스템이 처리할 수 있는 트래픽 증가가 목적
  - URL, 서버, 캐시, 쿠키들을 기반으로 트래픽 분산
  - 서버에 장애 발생 시 &rarr; 트래픽 분산 대상에서 제외(정기적인 헬스 체크)
- L4 스위치와 L7 스위치 차이
  - L4 스위치는 인터넷 계층을 처리하는 기기로 IP와 포트를 기반으로 트래픽 분산
  - L7 스위치는 IP, 포트 외에도 URL, HTTP 헤더, 쿠키 등을 기반으로 트래픽 분산
  - L7 스위치를 이용한 로드밸런싱: ALB(Application Load Balancer) 컴포넌트
  - L4 스위치를 이용한 로드밸런싱: NLB(Network Load Balancer) 컴포넌트
- 헬스 체크
  - 전송 주기와 재전송 횟수 등을 설정한 이후 반복적으로 서버에 요청을 보냄

### 🔅 로드밸런서를 이용한 서버 이중화
- 로드밸런서는 2대 이상의 서버를 기반으로 *가상 IP 제공*
- 에러가 발생하여 서버 1대가 종료되더라도 안정적으로 운용 가능  
![image](https://user-images.githubusercontent.com/108309396/235428184-d781b1c9-bd38-4fa4-b1ac-3984a3346527.png)

## 📌 2.3.3 인터넷 계층을 처리하는 기기
1. 라우터
   - 여러 개의 네트워크를 연결, 분할, 구분시켜주는 역할
   - 다른 네트워크에 존재하는 장치끼리 서로 데이터를 주고받을 때 패킷 소모를 최소화 / 경로를 최적화
   - 최소 경로로 패킷을 포워딩하는 라우팅을 하는 장비
2. L3 스위치
   - L2 스위치의 기능과 라우팅 기능을 갖춘 장비
   - 하드웨어 기반의 라우팅을 담당하는 장치
   - ![image](https://user-images.githubusercontent.com/108309396/235428656-2e0ad9b5-0b62-4809-a762-625e15ae47c0.png)

## 📌 2.3.4 데이터 링크 계층을 처리하는 기기
1. L2 스위치
   - 장치들의 MAC 주소를 MAC 주소 테이블을 통해 관리
   - 연결된 장치로부터 패킷이 왔을 때 패킷 전송 담당 
   - IP 주소를 기반으로 라우팅 불가능
   - 단순히 패킷의 MAC 주소를 읽어 스위칭하는 역할
   - 목적지가 MAC 주소 테이블에 없다면 전체 포트에 전달 후 MAC 주소 테이블의 주소는 일정 시간 이후 삭제
2. 브리지
   - 두 개의 근거리 통신망(LAN)을 상호 접속할 수 있도록 하는 통신망 연결 장치
   - 포트와 포트 사이의 다리 역할
   - 장치에서 받아온 MAC 주소를 MAC 주소 테이블로 관리
   - 통신망 범위 확장 / 하나의 통신망 구축할 때 사용

## 📌 2.3.5 물리 계층을 처리하는 기기
1. NIC(Network Interface Card)
   - LAN 카드
   - 2대 이상의 컴퓨터 네트워크를 구성하는데 사용
   - 네트워크와 빠른 속도로 데이터를 송수신할 수 있도록 컴퓨터 내에 설치하는 확장 카드
   - 각 LAN 카드에는 고유 식별번호인 MAC 주소가 있음
2. 리피터
   - 들어오는 약해진 신호 정도를 증폭해 다른 쪽으로 전달하는 장치
   - 패킷이 더 멀리 갈 수 있음
   - 광케이블이 보급됨에 따라 현재는 잘 쓰이지 않음
3. AP(Access Point)
   - 패킷을 복사하는 기기
   - AP에 유선 LAN 연결 후 다른 장치에서 무선 LAN 기술을 사용해 무선 네트워크 연결을 할 수 있음


# 2.4 IP 주소
## 📌 2.4.1 ARP
- 컴퓨터와 컴퓨터 간의 통신은 IP 주소에서 ARP를 통해 MAC 주소를 찾아 MAC 주소를 기반으로 통신
   - ARP(Address Resolution Protocol)이란? IP주소로부터 MAC 주소를 구하는 프로토콜
   - ARP: Logical address(IP address) &rarr; Physical address(MAC address)
   - RARP: Physical address(MAC address) &rarr; Logical address(IP address)
   - ![image](https://user-images.githubusercontent.com/108309396/235431093-0746c02f-c79d-4ee7-bbe5-b9c7cc3d0eab.png)
   - 1. 장치 A가 **ARP Request 브로드캐스트**를 보내 IP주소에 해당하는 MAC 주소를 찾는다
   - 2. 해당 주소에 맞는 장치 B가 **ARP reply 유니캐스트**를 통해 MAC 주소를 반환하는 과정을 거쳐 IP 주소에 맞는 MAC 주소를 찾게 됨

### [참고] 브로드캐스트와 유니캐스트
- 브로드캐스트: 송신 호스트가 전송한 네트워크에 연결된 모든 호스트에 전송되는 방식
- 유니캐스트: 고유 주소로 식별된 하나의 네트워크 목적지에 1:1로 데이터를 전송하는 방식

## 📌 2.4.2 홉바이홉 통신
- 홉바이홉(hop by hop) 통신: IP 주소를 통해 통신
  - 홉: 통신망에서 각 패킷이 여러 개의 라우터를 건너가는 모습
  - 각각의 라우터에 있는 라우팅 테이블의 IP를 기반으로 패킷 전달  
  ![image](https://user-images.githubusercontent.com/108309396/235551493-08a705c6-e9c5-4af3-a474-a49fd8b8e263.png)
  - 라우팅이란? IP주소를 찾아가는 과정
- 라우팅 테이블: 송신지에서 수신지까지 도달하기 위해 사용
  - 라우터에 들어가 있는 목적지 정보들과 목적지로 가기 위한 방법이 들어있는 리스트
  - 게이트웨이 / 모든 목적지에 대해 거쳐야 할 다음 라우터의 정보 를 가지고 있음
- 게이트웨이: 서로 다른 통신망, 프로토콜을 사용하는 네트워크 간의 통신을 가능하게 하는 컴퓨터나 소프트웨어
  - 서로 다른 네트워크 상의 통신 프로토콜을 변환
  ![image](https://user-images.githubusercontent.com/108309396/235551985-ef42641b-21b3-48dc-872f-30d9a07649e8.png)

## 📌 2.4.3 IP 주소 체계
- IPv4 &rarr; 32비트를 8비트 단위로 점을 찍어 표기 (123.45.67.89)
- IPv6 &rarr; 64비트를 16비트 단위로 점을 찍어 표기 (2001:db8:ff00:42:8329)
  - 추세는 IPv6
### 🔅 클래스 기반 할당 방식(CIDR)
- 앞에 있는 부분을 네트워크 주소, 뒤에 있는 부분을 호스트 주소
- 클래스 A, B, C는 일대일 통신, D는 멀티캐스트 통신, E는 예비용  
![image](https://user-images.githubusercontent.com/108309396/235552334-657d0065-3af0-4612-9271-fa6ffe7fde48.png)
- 구분 비트: 맨 왼쪽 비트  
![image](https://user-images.githubusercontent.com/108309396/235552456-9ee763c2-5ee4-4cb5-a6a8-7072603181fb.png)
- 네트워크 주소: 네트워크의 첫 번째 주소, 구별 주소
- 브로드캐스트용 주소: 네트워크에 속해 있는 모든 컴퓨터에 데이터를 보낼 때 사용  
![image](https://user-images.githubusercontent.com/108309396/235552602-045ac6cd-532c-4424-a466-31ec8538b2c8.png)
- But! 사용하는 주소보다 버리는 주소가 많음 &rarr; DHCP, IPv6, NAT로 해결

### 🔅 DHCP
- DHCP(Dynamic Host Configuration Protocol): IP 주소 및 기타 통신 매개변수를 자동으로 할당하기 위한 네트워크 관리 프로토콜
- 인터넷에 접속할 때마다 자동으로 IP 주소 할당 가능
- 대부분의 가정용 네트워크에서 사용

### 🔅 NAT
- NAT(Network Address Translation): 패킷이 라우팅 장치를 통해 전송되는 동안 패킷의 IP 주소 정보를 수정하여 IP 주소를 다른 주소로 매핑하는 방법
- IPv4만으로는 많은 주소들을 감당X &rarr; NAT로 공인IP와 사설IP로 나누어 처리
- NAT를 가능하게 하는 소프트웨어 &rarr; ICS, RRAS, Netfilter  
- NAT을 사용하는 이유: 여러 대의 호스트가 하나의 공인 IP 주소를 사용하여 인터넷에 접속하기 위함
![image](https://user-images.githubusercontent.com/108309396/235553030-4b45a6c8-d1bf-45d5-b875-d85ad0c417a9.png)
- 장점: 보안 - 내부 IP 주소와 외부에 드러나는 IP 주소가 다름
- 단점: 여러 명이 동시에 인터넷 접속 &rarr; 접속하는 호스트 숫자에 따라 접속 속도 느려질 수 있음

## 📌 2.4.4 IP 주소를 이용한 위치 정보
- IP 주소는 인터넷에서 사용하는 네트워크 주소이기 때문에 위치 추적이 가능함


# 2.5 HTTP